@model CCM3S_EIP.Areas.SRV.ViewModels.SrvProdViewModel

@{
    ViewBag.Title = "產品明細資料";
}
<h2>售服系統產品資料</h2>
<div class="form well">
    <fieldset>
        <legend>產品主檔</legend>
        <form >
            <div class="form-group row">
                <div class="col-md-2">
                    <label> 產品號碼: </label>
                    <div>
                        @Html.EditorFor(model => model.srvprodmt_data.PROD_NO, new { htmlAttributes = new { @class = "form-control input-sm", disabled = "disabled" } })
                    </div>
                </div>
                <div class="col-md-2">
                    <label>型式:</label>
                    <div>
                        @Html.EditorFor(model => model.srvprodmt_data.PROD_TY, new { htmlAttributes = new { @class = "form-control input-sm ", disabled = "disabled" } })
                    </div>
                </div>
                <div class="col-md-2">
                    <label >機台品號:</label>
                    <div class="form-group-sm">
                            @Html.EditorFor(model => model.srvprodmt_data.ITEM_NO, new { htmlAttributes = new { @class = "form-control input-sm",id= "tx_ITEM_NO", disabled = "disabled" } })
                    </div>
                </div>
                <div class="col-md-3">
                    <label>機台名稱:</label>
                    <div class="form-group-sm">
                        <input id="txtItemName" readonly class="form-control  input-sm" style="background: #CCC" />
                    </div>
                </div>
                <div class="col-md-3">
                    <label>機台規格:</label>
                    <div class="form-group-sm">
                        <input id="txtItemSpec" readonly class="form-control  input-sm" style="background: #CCC" />
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="col-lg-3">
                        <label>銷貨客戶:</label>
                    </div>
                    <div class="col-lg-4">
                        @Html.EditorFor(model => model.srvprodmt_data.SO_CS_NO, new { htmlAttributes = new { @class = "form-control input-sm", id = "tx_SO_CO_NO" , disabled = "disabled" } })
                    </div>
                    <div class="col-md-5">
                        <div class="form-group-sm">
                            <input id="txtSoCoNo_ShortNm" readonly class="form-control  input-sm" style="background: #CCC" />
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="col-lg-3">
                        <label>使用客戶:</label>
                    </div>
                    <div class="col-lg-4">
                        @Html.EditorFor(model => model.srvprodmt_data.CS_NO, new { htmlAttributes = new { @class = "form-control input-sm", id = "tx_CS_NO", disabled = "disabled" } })
                    </div>
                    <div class="col-md-5">
                        <div class="form-group-sm">
                            <input id="txtCsNo_ShortNm" readonly class="form-control  input-sm" style="background: #CCC" />
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="col-lg-3">
                        <label>送貨地點:</label>
                    </div>
                    <div class="col-lg-9">
                        @Html.EditorFor(model => model.srvprodmt_data.TO_ADDR, new { htmlAttributes = new { @class = "form-control input-sm", disabled = "disabled" } })
                    </div>
                </div>
            </div>
            <br />
                <div class="row">
                    <div class="col-md-2">
                        <div class="col-lg-5">
                            <label>出貨日期:</label>
                        </div>
                        <div class="col-lg-7">
                            @Html.EditorFor(model => model.srvprodmt_data.SO_DT, new
                   {
                       htmlAttributes = new
                       {
                           @class = "form-control input-sm",
                           Value = (Model.srvprodmt_data.SO_DT != null ? Model.srvprodmt_data.SO_DT.Value.ToString("yyyy-MM-dd") : "n/a"),
                           disabled = "disabled"
                       }
                   })
                        </div>
                    </div>
                   
                    <div class="col-md-3">

                        <label class="col-lg-4">產品保固:</label>
                        <div class="col-lg-3">
                            @Html.EditorFor(model => model.srvprodmt_data.PROD_GUAR_MM, new { htmlAttributes = new { @class = "form-control input-sm", disabled = "disabled" } })
                        </div>
                        <div class="form-group col-lg-5">
                            @Html.EditorFor(model => model.srvprodmt_data.PROD_GUAR_DT, new { htmlAttributes = new { @class = "form-control input-sm", Value = Model.srvprodmt_data.PROD_GUAR_DT.ToString("yyyy-MM-dd"), disabled = "disabled" } })
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="col-lg-4">
                            <label>主件保固:</label>
                        </div>
                        <div class="col-lg-3">
                            @Html.EditorFor(model => model.srvprodmt_data.M_ITEM_GUAR_MM, new { htmlAttributes = new { @class = "form-control input-sm", disabled = "disabled" } })
                        </div>
                        <div class="col-lg-5 ">
                            @Html.EditorFor(model => model.srvprodmt_data.M_ITEM_GUAR_DT, new { htmlAttributes = new { @class = "form-control input-sm", Value = Model.srvprodmt_data.M_ITEM_GUAR_DT.ToString("yyyy-MM-dd"), disabled = "disabled" } })
                        </div>
                    </div>
                </div>
                <div class="row">



                </div>

                <div class="row">
                    <div class="col-lg-12">
                        <label>備註:</label>
                        @Html.DisplayFor(model => model.srvprodmt_data.REMK, new { htmlAttributes = new { @class = "form-control input-sm", disabled = "disabled" } })
                    </div>
                </div>

</form>
    
</fieldset>
</div>



    <div class="form-actions">
        @*@Html.ActionLink("編輯", "Edit", new { id = Model.srvprodmt_data.PROD_NO }, new { @class = "btn btn-info" })*@
        <a class="btn btn-success" href="javascript:void(0);" onclick="history.go(-1);" role="button">上一頁</a>
    </div>

    <h3>產品資料明細</h3>
    <table class="table table-striped table-bordered table-hover">
        <tr style="background-color: #E8EEF4;">
            <td>序號</td>
            <td>項目</td>
            <td>描述</td>  
        </tr>
        @foreach (var item in Model.srvproddl_list)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.PROD_SR)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ENTRY)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DSCP_1)
                </td>

            </tr>
        }
    </table>

<h3>售服維護</h3>
<table class="table table-striped table-bordered table-hover">
    <tr style="background-color: #E8EEF4;">
        <td>單別</td>
        <td>單號</td>
        <td>日期</td>
        <td>問題</td>

    </tr>
    @foreach (var item in Model.vsrvdatamt_list)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.VCH_TY)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.VCH_NO)
            </td>
            <td>
                @*@Html.DisplayFor(modelItem => item.VCH_DT)*@
                @Html.DisplayFor(modelItem => item.VCH_DT, new
               {
                   htmlAttributes = new
                   {
                       @class = "form-control input-sm",
                       Value = (item.VCH_DT != null ? item.VCH_DT.Value.ToString("yyyy-MM-dd") : "n/a"),
                       disabled = "disabled"
                   }
               })
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.PROB_REC)
            </td>
        </tr>
    }
</table>

    @Scripts.Render("~/bundles/dotimeout")
    <script>
        $(document).ready(function () {
            //機台名稱
            $.get(
                '@Url.Content("~/_getDBdata.ashx")',
                { key: $("#tx_ITEM_NO").val(), sw: 'item_nm' },
                 function (res) {
                     $("#txtItemName").val(res);
                 });
            //機台規格
            $.get(
                '@Url.Content("~/_getDBdata.ashx")',
                { key: $("#tx_ITEM_NO").val(), sw: 'item_sp' },
                 function (res) {
                     $("#txtItemSpec").val(res);
                 });
            //客戶簡稱
            $.get(
                '@Url.Content("~/_getDBdata.ashx")',
                { key: $("#tx_SO_CO_NO").val(), sw: 'short_nm' },
                 function (res) {
                     $("#txtSoCoNo_ShortNm").val(res);
                 });
            //客戶簡稱
            $.get(
                '@Url.Content("~/_getDBdata.ashx")',
                { key: $("#tx_CS_NO").val(), sw: 'short_nm' },
                 function (res) {
                     $("#txtCsNo_ShortNm").val(res);
                 });

        });
    </script>
